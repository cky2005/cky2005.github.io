<!-- build time:Thu Feb 14 2019 22:36:43 GMT+0800 (GMT+08:00) --><!DOCTYPE HTML><html><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="chrome=1"><title>区块链的星际文件系统（IPFS） | 唔多阁</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="author" content="(^_^)"><meta name="description" content="IPFS（InterPlanetary File System），星际文件系统，"><meta name="description" content="IPFS（InterPlanetary File System），星际文件系统，"><meta property="og:type" content="article"><meta property="og:title" content="区块链的星际文件系统（IPFS）"><meta property="og:url" content="https://cky2005.github.io/2017/09/13u0b6.html"><meta property="og:site_name" content="唔多阁"><meta property="og:description" content="IPFS（InterPlanetary File System），星际文件系统，"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2017-09-13T10:01:04.823Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="区块链的星际文件系统（IPFS）"><meta name="twitter:description" content="IPFS（InterPlanetary File System），星际文件系统，"><link rel="icon" type="image/x-icon" href="/img/favicon.ico"><link rel="stylesheet" href="/css/style.css"></head></html><body><div class="wrapper"><header id="header"><div class="title"><h1><a href="/">唔多阁</a></h1><p><a href="/">(学习笔记,备忘,纯属复制粘贴,无技术含量)</a></p></div><nav class="nav"><ul></ul><div class="clearfix"></div></nav><div class="clearfix"></div></header><div class="content"><article class="post"><header><div class="icon"></div><a href="/2017/09/13u0b6.html"><time datetime="2017-09-13T03:56:00.000Z">2017-09-13</time></a><h1 class="title">区块链的星际文件系统（IPFS）</h1></header><div class="entry"><p>IPFS（InterPlanetary File System），星际文件系统，<a id="more"></a>使用对等超媒体分发协议，将IPFS网络中的电脑通过协议连接成一个分布式文件系统。简单来讲，用户在访问文件时，不再基于域名地址的URI去寻找，而是直接寻找这个文件内容的地址，这个地址就是IPFS系统生成的内容文件的哈希值，通过这个唯一的哈希值就可以找到网络上存储了文件的电脑，并快速下载。这样就不再依赖于中心化的域名服务器和数据服务器分发数据，而是通过网络上千千万万的电脑去查找需要的数据。这样就不需要验证用户的的身份，而只需要验证内容的的哈希，使得网页的速度更快，更安全，更健壮，更持久。<br>上面说到IPFS是一个文件系统，那如何把自己的文件加入这个文件系统呢？只需要通过添加命令将本地磁盘的文件添加到ipfs，生成文件的哈希值；启动本地的ipfs服务，就可以全球访问这个文件了。</p><h4 id="Windows安装"><a href="#Windows安装" class="headerlink" title="Windows安装"></a>Windows安装</h4><p><a href="https://dist.ipfs.io/#go-ipfs" target="_blank" rel="noopener">下载Windows的对应版本zip文件，然后解压.</a></p><p>为方便操作,可以将ipfs.exe所在文件夹路径添加到环境变量”PATH”:win10系统运行SystemPropertiesAdvanced.exe设置环境变量,或者进入”设置”搜索”编辑系统环境变量”</p><p>运行打开cmd窗口:<br>ipfs help<br></p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Microsoft Windows [版本 10.0.15063]</span><br><span class="line">(c) 2017 Microsoft Corporation。保留所有权利。</span><br><span class="line"></span><br><span class="line">D:\go-ipfs&gt;ipfs help</span><br><span class="line">USAGE</span><br><span class="line">  ipfs - Global p2p merkle-dag filesystem.</span><br><span class="line"></span><br><span class="line">  ipfs [--config=&lt;config&gt; | -c] [--debug=&lt;debug&gt; | -D] [--help=&lt;help&gt;] [-h=&lt;h&gt;] [--local=&lt;local&gt; | -L] [--api=&lt;api&gt;] &lt;command&gt; ...</span><br><span class="line"></span><br><span class="line">SUBCOMMANDS</span><br><span class="line">  BASIC COMMANDS</span><br><span class="line">    init          Initialize ipfs local configuration</span><br><span class="line">    add &lt;path&gt;    Add a file to IPFS</span><br><span class="line">    cat &lt;ref&gt;     Show IPFS object data</span><br><span class="line">    ．．．．．．</span><br></pre></td></tr></table></figure><p></p><p>成功显示ipfs帮助信息，就表示安装成功了。</p><h4 id="1-初始化本地仓库"><a href="#1-初始化本地仓库" class="headerlink" title="1.初始化本地仓库"></a>1.初始化本地仓库</h4><p>ipfs init (初始化,这个只运行一次，以后不需要再运行）<br></p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">D:\go-ipfs&gt;ipfs init</span><br><span class="line">initializing ipfs node at C:\Users\eureka.ipfs</span><br><span class="line">generating 2048-bit RSA keypair…done</span><br><span class="line">peer identity: Qxxxxxxxxxxxxxxxxxxxxxxx</span><br><span class="line">to get started, enter:</span><br><span class="line">  ipfs cat /ipfs/Qxxxxxx/readme</span><br></pre></td></tr></table></figure><p></p><h4 id="执行初始化信息最后一行-可以查看更多说明信息"><a href="#执行初始化信息最后一行-可以查看更多说明信息" class="headerlink" title="执行初始化信息最后一行,可以查看更多说明信息"></a>执行初始化信息最后一行,可以查看更多说明信息</h4><p>ipfs cat /ipfs/Qxxxxxx/readme<br></p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">D:\go-ipfs&gt;ipfs cat /ipfs/Qxxxxxx/readme</span><br><span class="line">Hello and Welcome to IPFS!</span><br><span class="line"></span><br><span class="line">██╗██████╗ ███████╗███████╗</span><br><span class="line">██║██╔══██╗██╔════╝██╔════╝</span><br><span class="line">██║██████╔╝█████╗  ███████╗</span><br><span class="line">██║██╔═══╝ ██╔══╝  ╚════██║</span><br><span class="line">██║██║     ██║     ███████║</span><br><span class="line">╚═╝╚═╝     ╚═╝     ╚══════╝</span><br><span class="line"></span><br><span class="line"> ．．．．．．</span><br><span class="line"></span><br><span class="line">  ./about</span><br><span class="line">  ./help</span><br><span class="line">  ./quick-start     &lt;– usage examples</span><br><span class="line">  ./readme          &lt;– this file</span><br><span class="line">  ./security-notes</span><br></pre></td></tr></table></figure><p></p><h4 id="使用quick-start参数显示操作说明-如增加文件删除文件等"><a href="#使用quick-start参数显示操作说明-如增加文件删除文件等" class="headerlink" title="使用quick-start参数显示操作说明,如增加文件删除文件等"></a>使用quick-start参数显示操作说明,如增加文件删除文件等</h4><p>ipfs cat /ipfs/Qxxxxxx/quick-start<br></p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">D:\go-ipfs&gt;ipfs cat /ipfs/Qxxxxxx/quick-start</span><br><span class="line"># 0.1 - Quick Start</span><br><span class="line">This is a set of short examples with minimal explanation. It is meant as</span><br><span class="line">a “quick start”. Soon, we’ll write a longer tour :-)</span><br><span class="line">Add a file to ipfs:</span><br><span class="line">  echo “hello world” &gt;hello</span><br><span class="line">  ipfs add hello</span><br><span class="line">View it:</span><br><span class="line">  ipfs cat &lt;the-hash-you-got-here&gt;</span><br><span class="line">  ．．．．．．</span><br></pre></td></tr></table></figure><p></p><h4 id="2-启动daemon进程开启线上模式"><a href="#2-启动daemon进程开启线上模式" class="headerlink" title="2.启动daemon进程开启线上模式"></a>2.启动daemon进程开启线上模式</h4><p>ipfs daemon<br></p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">D:\go-ipfs&gt;ipfs daemon</span><br><span class="line">Initializing daemon...</span><br><span class="line">Swarm listening on /ip4/127.0.0.1/tcp/4001</span><br><span class="line">Swarm listening on /ip4/169.254.151.207/tcp/4001</span><br><span class="line">Swarm listening on /ip4/169.254.195.157/tcp/4001</span><br><span class="line">Swarm listening on /ip4/169.254.229.182/tcp/4001</span><br><span class="line">Swarm listening on /ip4/169.254.47.116/tcp/4001</span><br><span class="line">Swarm listening on /ip4/172.20.10.2/tcp/4001</span><br><span class="line">Swarm listening on /ip6/2001:0:9d38:953c:10b3:c7a4:8f9f:95ab/tcp/4001</span><br><span class="line">Swarm listening on /ip6/::1/tcp/4001</span><br><span class="line">API server listening on /ip4/127.0.0.1/tcp/5001</span><br><span class="line">Gateway (readonly) server listening on /ip4/127.0.0.1/tcp/8080</span><br><span class="line">Daemon is ready</span><br></pre></td></tr></table></figure><p></p><p>现在可以在浏览器上输入 <code>http://localhost:5001/webui</code> 进入Web 图形界面.<br>注意:运行daemon后这个cmd窗口就被占用了,<code>不要关闭这个窗口</code>,你再另开一个新的cmd窗口.<br>注意:运行daemon后更新节点仓库会<code>消耗网络流量</code>.</p><h4 id="查看本地节点仓库状态"><a href="#查看本地节点仓库状态" class="headerlink" title="查看本地节点仓库状态"></a>查看本地节点仓库状态</h4><p>ipfs repo stat<br>每次运行都可以看到，在线时本地的节点仓库会快速同步数据，RepoSize不断增长:<br></p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">D:\go-ipfs&gt;ipfs repo stat</span><br><span class="line">NumObjects: 689</span><br><span class="line">RepoSize:   116394035</span><br><span class="line">StorageMax: 10000000000</span><br><span class="line">RepoPath:   D:/go-ipfs</span><br><span class="line">Version:    fs-repo@5</span><br></pre></td></tr></table></figure><p></p><h4 id="查看连接到本地的节点列表-很多"><a href="#查看连接到本地的节点列表-很多" class="headerlink" title="查看连接到本地的节点列表(很多,)"></a>查看连接到本地的节点列表(很多,)</h4><p>ipfs swarm peers</p><h4 id="查看自己生成的ID-全球唯一"><a href="#查看自己生成的ID-全球唯一" class="headerlink" title="查看自己生成的ID(全球唯一)"></a>查看自己生成的ID(全球唯一)</h4><p>ipfs id<br></p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">D:\go-ipfs&gt;ipfs id</span><br><span class="line">&#123;</span><br><span class="line">        &quot;ID&quot;: &quot;Qxxxxxxxxxxxxxxxx&quot;,</span><br><span class="line">        &quot;PublicKey&quot;:xxxxxxxxxxxx</span><br><span class="line">        ．．．．．．</span><br></pre></td></tr></table></figure><p></p><h4 id="3-上传一个文件或目录到网络上"><a href="#3-上传一个文件或目录到网络上" class="headerlink" title="3.上传一个文件或目录到网络上"></a>3.上传一个文件或目录到网络上</h4><p>“ipfs add 文件名” 或者 “ifps add -r 目录名”<br></p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">D:go-ipfs&gt;ipfs add test.html</span><br><span class="line">1.28 KB / 1.28 KB [================================================] 100.00 % 0</span><br><span class="line">added Qxxxxxx test.html</span><br></pre></td></tr></table></figure><p></p><p>这时我们得到一个hash值。<br>打开浏览器，我们可以直接用 <a href="http://127.0.0.1:8080/ipfs/Qxxxxxx" target="_blank" rel="noopener">http://127.0.0.1:8080/ipfs/Qxxxxxx</a> 查看当前加入的文件。<br>或者访问网络上文件 <a href="https://ipfs.io/ipfs/Qxxxxxx" target="_blank" rel="noopener">https://ipfs.io/ipfs/Qxxxxxx</a></p><p>ipfs add filename 加一个文件<br>ipfs add -r dirname 加一个目录<br>ipfs pin rm Qxxxxxx 删除单个文件<br>ipfs repo gc 清空垃圾文件?</p><p>总结一下，IPFS就是一个将文件存储在世界各地的文件系统，可以不需要中心化域名服务器直接从对方磁盘上下载内容，实现分布式的web，甚至代替http，这样节约了带宽，并能够防止DDoS攻击。去中心化的文件系统可以降低中心化服务器数据丢失的风险。过不了多久，想找音乐，图片，视屏，大概就不需要访问各种网站了吧，IPFS可以更快地搜索，访问和下载。</p><p>简单直接示例:<br></p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 开第一个cmd窗口:</span></span><br><span class="line">ipfs init <span class="comment">#只执行一次 以后不用执行</span></span><br><span class="line">ipfs daemon</span><br><span class="line"><span class="comment"># 开第二个cmd窗口:</span></span><br><span class="line">ipfs add 文件</span><br><span class="line"><span class="comment"># add文件后得到hash值,用浏览器访问 https://ipfs.io/ipfs/"hash值"访问网络上文件 </span></span><br><span class="line">https:<span class="comment">//ipfs.io/ipfs/Qxxxxxx</span></span><br></pre></td></tr></table></figure><p></p></div><footer><div class="clearfix"></div></footer></article></div></div><footer id="footer"><div class="copyright">&copy; 2019 <a href="/">(^_^)</a></div><div class="theme-copyright"><a href="javascript:scroll(0,0)">返回顶部</a> &nbsp; <a href="/archives/index.html">档案馆</a> &nbsp; <a href="/index.html">首页</a></div><div class="clearfix"></div></footer><script src="//apps.bdimg.com/libs/jquery/2.0.3/jquery.min.js"></script><script src="/js/all.js"></script><script type="text/javascript">$(document).ready(function(){$(document).on("click",".fold_hider",function(){$(">.fold",this.parentNode).slideToggle(),$(">:first",this).toggleClass("open")}),$("div.fold").css("display","none")})</script></body><!-- rebuild by neat -->