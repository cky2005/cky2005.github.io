<!-- build time:Sat Jan 19 2019 11:30:00 GMT+0800 (GMT+08:00) --><!DOCTYPE HTML><html><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="chrome=1"><title>openshift 部署 V2Ray 之 ws | 唔多阁</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="author" content="(^_^)"><meta name="description" content="openshift 部署 V2Ray 之 wsOpenshift3 starter 开放注册，目前可选US West (Oregon)、US East (Virginia)、CA。1.1 Openshift Route 3种类型insecure（http）、edge（wss）、passthrough（https）websocket模式： Openshift3 route：edge，v2ray：ws"><meta name="description" content="openshift 部署 V2Ray 之 wsOpenshift3 starter 开放注册，目前可选US West (Oregon)、US East (Virginia)、CA。1.1 Openshift Route 3种类型insecure（http）、edge（wss）、passthrough（https）websocket模式： Openshift3 route：edge，v2ray：ws"><meta name="keywords" content="v2ray"><meta property="og:type" content="article"><meta property="og:title" content="openshift 部署 V2Ray 之 ws"><meta property="og:url" content="https://cky2005.github.io/2017/12/06u0d9.html"><meta property="og:site_name" content="唔多阁"><meta property="og:description" content="openshift 部署 V2Ray 之 wsOpenshift3 starter 开放注册，目前可选US West (Oregon)、US East (Virginia)、CA。1.1 Openshift Route 3种类型insecure（http）、edge（wss）、passthrough（https）websocket模式： Openshift3 route：edge，v2ray：ws"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2018-09-23T04:42:59.653Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="openshift 部署 V2Ray 之 ws"><meta name="twitter:description" content="openshift 部署 V2Ray 之 wsOpenshift3 starter 开放注册，目前可选US West (Oregon)、US East (Virginia)、CA。1.1 Openshift Route 3种类型insecure（http）、edge（wss）、passthrough（https）websocket模式： Openshift3 route：edge，v2ray：ws"><link rel="icon" type="image/x-icon" href="/img/favicon.ico"><link rel="stylesheet" href="/css/style.css"></head></html><body><div class="wrapper"><header id="header"><div class="title"><h1><a href="/">唔多阁</a></h1><p><a href="/">(学习笔记,备忘,纯属复制粘贴,无技术含量)</a></p></div><nav class="nav"><ul></ul><div class="clearfix"></div></nav><div class="clearfix"></div></header><div class="content"><article class="post"><header><div class="icon"></div><a href="/2017/12/06u0d9.html"><time datetime="2017-12-06T09:00:17.000Z">2017-12-06</time></a><h1 class="title">openshift 部署 V2Ray 之 ws</h1></header><div class="entry"><h3 id="openshift-部署-V2Ray-之-ws"><a href="#openshift-部署-V2Ray-之-ws" class="headerlink" title="openshift 部署 V2Ray 之 ws"></a>openshift 部署 V2Ray 之 ws</h3><ol><li>Openshift3 starter 开放注册，目前可选US West (Oregon)、US East (Virginia)、CA。<br>1.1 Openshift Route 3种类型insecure（http）、edge（wss）、passthrough（https）</li><li>websocket模式： Openshift3 route：<code>edge</code>，v2ray：<code>ws+tls+vmess</code>（不加密）</li></ol><a id="more"></a><h4 id="服务端配置文件"><a href="#服务端配置文件" class="headerlink" title="服务端配置文件"></a>服务端配置文件</h4><div><div class="fold_hider"><div class="close hider_title">点击折叠/展开</div></div><div class="fold"><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;log&quot;: &#123;</span><br><span class="line">    &quot;loglevel&quot;: &quot;warning&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;inbound&quot;: &#123;</span><br><span class="line">    &quot;protocol&quot;: &quot;vmess&quot;,</span><br><span class="line">    &quot;port&quot;: 8080,</span><br><span class="line">    &quot;settings&quot;: &#123;</span><br><span class="line">      &quot;clients&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;id&quot;: &quot;#########################&quot;,</span><br><span class="line">          &quot;alterId&quot;: 64,</span><br><span class="line">          &quot;security&quot;: &quot;none&quot;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;streamSettings&quot;: &#123;</span><br><span class="line">      &quot;network&quot;: &quot;ws&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;inboundDetour&quot;: [],</span><br><span class="line">  &quot;outbound&quot;: &#123;</span><br><span class="line">    &quot;protocol&quot;: &quot;freedom&quot;,</span><br><span class="line">   &quot;settings&quot;: &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br></div></div><hr><h4 id="pc客户端配置文件"><a href="#pc客户端配置文件" class="headerlink" title="pc客户端配置文件"></a>pc客户端配置文件</h4><div><div class="fold_hider"><div class="close hider_title">点击折叠/展开</div></div><div class="fold"><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;log&quot;: &#123;</span><br><span class="line">    &quot;loglevel&quot;: &quot;warning&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;inbound&quot;: &#123;</span><br><span class="line">    &quot;port&quot;: 1080,</span><br><span class="line">    &quot;listen&quot;: &quot;0.0.0.0&quot;,</span><br><span class="line">    &quot;protocol&quot;: &quot;socks&quot;,</span><br><span class="line">    &quot;settings&quot;: &#123;</span><br><span class="line">      &quot;auth&quot;: &quot;noauth&quot;,</span><br><span class="line">      &quot;udp&quot;: true,</span><br><span class="line">      &quot;ip&quot;: &quot;127.0.0.1&quot;,</span><br><span class="line">      &quot;clients&quot;: null</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;streamSettings&quot;: null</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;inboundDetour&quot;: [],</span><br><span class="line">  &quot;outbound&quot;: &#123;</span><br><span class="line">    &quot;protocol&quot;: &quot;vmess&quot;,</span><br><span class="line">    &quot;settings&quot;: &#123;</span><br><span class="line">      &quot;vnext&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;address&quot;: &quot;##############.openshiftapps.com&quot;, </span><br><span class="line">          &quot;port&quot;: 443, </span><br><span class="line">          &quot;users&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;id&quot;: &quot;#######################&quot;,</span><br><span class="line">              &quot;alterId&quot;: 64,</span><br><span class="line">              &quot;security&quot;: &quot;none&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">  &quot;streamSettings&quot;: &#123;</span><br><span class="line">      &quot;network&quot;: &quot;ws&quot;,</span><br><span class="line">    &quot;security&quot;: &quot;tls&quot;,</span><br><span class="line">    &quot;tlsSettings&quot;: &#123;</span><br><span class="line">        &quot;allowInsecure&quot;: true</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &quot;mux&quot;: &#123;</span><br><span class="line">        &quot;enabled&quot;: true,</span><br><span class="line">        &quot;concurrency&quot;: 8</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;outboundDetour&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;protocol&quot;: &quot;freedom&quot;,</span><br><span class="line">      &quot;settings&quot;: &#123;&#125;,</span><br><span class="line">      &quot;tag&quot;: &quot;direct&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  &quot;dns&quot;: &#123;</span><br><span class="line">    &quot;servers&quot;: [</span><br><span class="line">      &quot;localhost&quot;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;routing&quot;: &#123;</span><br><span class="line">    &quot;strategy&quot;: &quot;rules&quot;,</span><br><span class="line">    &quot;settings&quot;: &#123;</span><br><span class="line">      &quot;domainStrategy&quot;: &quot;AsIs&quot;,</span><br><span class="line">      &quot;rules&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;type&quot;: &quot;chinasites&quot;,</span><br><span class="line">          &quot;outboundTag&quot;: &quot;direct&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;type&quot;: &quot;field&quot;,</span><br><span class="line">          &quot;ip&quot;: [</span><br><span class="line">            &quot;0.0.0.0/8&quot;,</span><br><span class="line">            &quot;10.0.0.0/8&quot;,</span><br><span class="line">            &quot;100.64.0.0/10&quot;,</span><br><span class="line">            &quot;127.0.0.0/8&quot;,</span><br><span class="line">            &quot;169.254.0.0/16&quot;,</span><br><span class="line">            &quot;172.16.0.0/12&quot;,</span><br><span class="line">            &quot;192.0.0.0/24&quot;,</span><br><span class="line">            &quot;192.0.2.0/24&quot;,</span><br><span class="line">            &quot;192.168.0.0/16&quot;,</span><br><span class="line">            &quot;198.18.0.0/15&quot;,</span><br><span class="line">            &quot;198.51.100.0/24&quot;,</span><br><span class="line">            &quot;203.0.113.0/24&quot;,</span><br><span class="line">            &quot;::1/128&quot;,</span><br><span class="line">            &quot;fc00::/7&quot;,</span><br><span class="line">            &quot;fe80::/10&quot;</span><br><span class="line">          ],</span><br><span class="line">          &quot;outboundTag&quot;: &quot;direct&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;type&quot;: &quot;chinaip&quot;,</span><br><span class="line">          &quot;outboundTag&quot;: &quot;direct&quot;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br></div></div><hr><h4 id="android-Actinium-0-10-2-客户配置文件"><a href="#android-Actinium-0-10-2-客户配置文件" class="headerlink" title="android Actinium 0.10.2 客户配置文件"></a>android Actinium 0.10.2 客户配置文件</h4><div><div class="fold_hider"><div class="close hider_title">点击折叠/展开</div></div><div class="fold"><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;port&quot;: 10808,</span><br><span class="line">  &quot;log&quot;: &#123;</span><br><span class="line">    &quot;loglevel&quot;: &quot;warning&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;inbound&quot;: &#123;</span><br><span class="line">    &quot;protocol&quot;: &quot;socks&quot;,</span><br><span class="line">    &quot;listen&quot;: &quot;127.0.0.1&quot;,</span><br><span class="line">    &quot;settings&quot;: &#123;</span><br><span class="line">      &quot;auth&quot;: &quot;noauth&quot;,</span><br><span class="line">      &quot;udp&quot;: true,</span><br><span class="line">     &quot;ip&quot;: &quot;127.0.0.1&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">  &quot;domainOverride&quot;: [&quot;http&quot;, &quot;tls&quot;]</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;inboundDetour&quot;: [],</span><br><span class="line">  &quot;outbound&quot;: &#123;</span><br><span class="line">    &quot;protocol&quot;: &quot;vmess&quot;,</span><br><span class="line">    &quot;settings&quot;: &#123;</span><br><span class="line">      &quot;vnext&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;address&quot;: &quot;#################.openshiftapps.com&quot;, </span><br><span class="line">          &quot;port&quot;: 443, </span><br><span class="line">          &quot;users&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;id&quot;: &quot;####################&quot;,</span><br><span class="line">              &quot;alterId&quot;: 64,</span><br><span class="line">              &quot;security&quot;: &quot;none&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">  &quot;streamSettings&quot;: &#123;</span><br><span class="line">      &quot;network&quot;: &quot;ws&quot;,</span><br><span class="line">    &quot;security&quot;: &quot;tls&quot;,</span><br><span class="line">    &quot;tlsSettings&quot;: &#123;</span><br><span class="line">        &quot;allowInsecure&quot;: true</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &quot;mux&quot;: &#123;</span><br><span class="line">      &quot;enabled&quot;: true</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;outboundDetour&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;protocol&quot;: &quot;freedom&quot;,</span><br><span class="line">      &quot;settings&quot;: &#123;&#125;,</span><br><span class="line">      &quot;tag&quot;: &quot;direct&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  &quot;dns&quot;: &#123;</span><br><span class="line">    &quot;servers&quot;: [</span><br><span class="line">      &quot;localhost&quot;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;routing&quot;: &#123;</span><br><span class="line">    &quot;strategy&quot;: &quot;rules&quot;,</span><br><span class="line">    &quot;settings&quot;: &#123;</span><br><span class="line">      &quot;domainStrategy&quot;: &quot;AsIs&quot;,</span><br><span class="line">      &quot;rules&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;type&quot;: &quot;chinasites&quot;,</span><br><span class="line">        &quot;outboundTag&quot;: &quot;direct&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;type&quot;: &quot;chinaip&quot;,</span><br><span class="line">        &quot;outboundTag&quot;: &quot;direct&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;transport&quot;: &#123;&#125;,</span><br><span class="line">  &quot;#lib2ray&quot;: &#123;</span><br><span class="line">    &quot;enabled&quot;: true,</span><br><span class="line">    &quot;listener&quot;: &#123;</span><br><span class="line">      &quot;onUp&quot;: &quot;#none&quot;,</span><br><span class="line">      &quot;onDown&quot;: &quot;#none&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;env&quot;: [</span><br><span class="line">      &quot;V2RaySocksPort=10808&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;render&quot;: [],</span><br><span class="line">    &quot;escort&quot;: [],</span><br><span class="line">    &quot;vpnservice&quot;: &#123;</span><br><span class="line">      &quot;Target&quot;: &quot;$&#123;datadir&#125;tun2socks&quot;,</span><br><span class="line">      &quot;Args&quot;: [</span><br><span class="line">        &quot;--netif-ipaddr&quot;,</span><br><span class="line">        &quot;26.26.26.2&quot;,</span><br><span class="line">        &quot;--netif-netmask&quot;,</span><br><span class="line">        &quot;255.255.255.0&quot;,</span><br><span class="line">        &quot;--socks-server-addr&quot;,</span><br><span class="line">        &quot;127.0.0.1:$V2RaySocksPort&quot;,</span><br><span class="line">        &quot;--tunfd&quot;,</span><br><span class="line">        &quot;3&quot;,</span><br><span class="line">        &quot;--tunmtu&quot;,</span><br><span class="line">        &quot;1500&quot;,</span><br><span class="line">        &quot;--sock-path&quot;,</span><br><span class="line">        &quot;/dev/null&quot;,</span><br><span class="line">        &quot;--loglevel&quot;,</span><br><span class="line">        &quot;4&quot;,</span><br><span class="line">        &quot;--enable-udprelay&quot;</span><br><span class="line">      ],</span><br><span class="line">      &quot;VPNSetupArg&quot;: &quot;m,1500 a,26.26.26.1,24 r,0.0.0.0,0&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br></div></div><hr><h4 id="使用说明"><a href="#使用说明" class="headerlink" title="使用说明"></a>使用说明</h4><p>3.0 Docker 镜像：wuming2018/openshift-v2ray<br>3.1 服务端配置文件:修改id(uuid)<br>3.2 环境变量： CONFIG_JSON，用notepad++将服务端配置文件中\r\n 全局替换为\\n，变成一行，导入容器环境设置。<br>3.3 depoly 完成后,creat route：<code>edge</code> ,得到app网址.<br>3.4 客户端配置:修改id(uuid),address(app网址).<br>3.5 手机、pc可用同一个服务端，websocket 作为传输协议。<br>3.6 PC端用 socks代理(127.0.0.1:1080)。<br>3.7 pc客户端用官方v2ray core,不要用第三方图形客户端.<br>3.8 Android 用 socks 代理。</p><p><a href="https://github.com/wangyi2005/v2ray" target="_blank" rel="noopener">来源</a></p></div><footer><div class="tags"><a class="tags-link" href="/tags/v2ray/">v2ray</a></div><div class="clearfix"></div></footer></article></div></div><footer id="footer"><div class="copyright">&copy; 2019 <a href="/">(^_^)</a></div><div class="theme-copyright"><a href="javascript:scroll(0,0)">返回顶部</a> &nbsp; <a href="/archives/index.html">档案馆</a> &nbsp; <a href="/index.html">首页</a></div><div class="clearfix"></div></footer><script src="//apps.bdimg.com/libs/jquery/2.0.3/jquery.min.js"></script><script src="/js/all.js"></script><script type="text/javascript">$(document).ready(function(){$(document).on("click",".fold_hider",function(){$(">.fold",this.parentNode).slideToggle(),$(">:first",this).toggleClass("open")}),$("div.fold").css("display","none")})</script></body><!-- rebuild by neat -->