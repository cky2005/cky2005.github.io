<!-- build time:Mon Oct 09 2017 22:27:30 GMT+0800 (中国标准时间) --><!DOCTYPE HTML><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="chrome=1"><div class="r_m"><a href="/index.html"><i class="icon-home icon-2x"></i></a></div><div class="r1_m"><a href="#" onclick="history.back(-1)"><i class="icon-circle-arrow-left icon-2x"></i></a></div><div class="r2_m"><a href="#" onclick="history.go(1)"><i class="icon-circle-arrow-right icon-2x"></i></a></div><div id="squ-side"><div class="squ-sidec"><div style="text-align:left"><a href="https://www.weibo.com"><i class="icon-weibo icon-2x"></i></a><br><a href="https://www.tumblr.com"><i class="icon-tumblr icon-2x"></i></a><br><a href="https://www.twitter.com"><i class="icon-twitter-sign icon-2x"></i></a><br><a href="/about/index.html"><i class="icon-tags icon-2x"></i></a></div></div><div class="squ-sideb"><div class="b">?</div></div></div><title>Linux下通过locale来设置字符集 | 唔多阁</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="author" content="(^_^)"><meta name="description" content="安装/设置系统中文字符集,让系统支持中文显示"><meta name="description" content="安装/设置系统中文字符集,让系统支持中文显示"><meta property="og:type" content="article"><meta property="og:title" content="Linux下通过locale来设置字符集"><meta property="og:url" content="https://www.233666.org/2017/08/28/u0a4/index.html"><meta property="og:site_name" content="唔多阁"><meta property="og:description" content="安装/设置系统中文字符集,让系统支持中文显示"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2017-08-28T09:52:42.217Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Linux下通过locale来设置字符集"><meta name="twitter:description" content="安装/设置系统中文字符集,让系统支持中文显示"><link rel="icon" type="image/x-icon" href="/img/favicon.ico"><link rel="stylesheet" href="/css/style.css"></head></html><body><div class="wrapper"><header id="header"><div class="title"><h1><a href="/">唔多阁</a></h1><p><a href="/">(学习笔记,备忘,纯属复制粘贴,无技术含量)</a></p></div><nav class="nav"><ul></ul><div class="clearfix"></div></nav><div class="clearfix"></div></header><div class="content"><article class="post"><header><div class="icon"></div><a href="/2017/08/28/u0a4/"><time datetime="2017-08-27T16:21:00.000Z">2017-08-28</time></a><h1 class="title">Linux下通过locale来设置字符集</h1></header><div class="entry"><p>安装/设置系统中文字符集,让系统支持中文显示<a id="more"></a></p><p>Linux下默认locale一般为”POSIX”，而BSD系统下多为”C”。”C”是系统默认的locale，<br>“POSIX”多为”C”的别名，所以当我们新安装完一个系统时，默认的locale就是C或POSIX。</p><p>临时修改当前终端为locale为gbk的中文编码：<br></p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">export export LC_ALL=zh_CN.GBK</div></pre></td></tr></table></figure><p></p><p>当然是否能正常显示或处理中文还与连接的终端工具的会话设置有关。</p><h4 id="在CentOS中配置locales的方法："><a href="#在CentOS中配置locales的方法：" class="headerlink" title="在CentOS中配置locales的方法："></a>在CentOS中配置locales的方法：</h4><p>安装中文支持包：<br></p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">yum groupinstall chinese-support</div></pre></td></tr></table></figure><p></p><p>修改字符编码配置，没有这个文件(/etc/sysconfig/i18n)就创建它：<br></p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">LANG=&quot;zh_CN.GBK&quot;</div><div class="line">SUPPORTED=zh_CN.UTF-8:zh_CN:zh:en_US.UTF-8:en_US:en&quot;</div><div class="line">SYSFONT=&quot;latarcyrheb-sun16&quot;</div></pre></td></tr></table></figure><p></p><p>i18n文件是用来设置系统语言，比如：zh_CN.UTF-8、zh_CN.GBk、zh_TW.Big5、en_US.UTF-8等。</p><p>i18n中三个环境变量：</p><ul><li>LANG变量，设置系统语言。</li><li>SUPPORTED变量决定系统支持的语言，即系统能够显示的语言。</li><li>SYSFONT变量表示系统字体。<br>配置完成后重启服务器后可完成。</li></ul><hr><h4 id="在Debian中安装-使用locales的方法："><a href="#在Debian中安装-使用locales的方法：" class="headerlink" title="在Debian中安装/使用locales的方法："></a>在Debian中安装/使用locales的方法：</h4><p>输入 <code>locale</code> 查看字符编码设置情况,如果命令不存在就需要安装软件包<br></p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">apt-get install locales</div></pre></td></tr></table></figure><p></p><p>如果还是没有/通过<code>locales -a</code>查看显示不完全，就需要安装完整版:<br></p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">locales-all</div></pre></td></tr></table></figure><p></p><p>安装完成locales包后，系统会自动进行locale配置，你只要选择所需的locale，可以多选，<br>最后指定一个系统默认的locale。这样系统就会帮你自动生成相应的locale和配置好系统的locale。</p><p>如果已经安装过locales包,增加或修改新的locale也很简单,用下面命令重置locale即可:<br></p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">dpkp-reconfigure locales</div></pre></td></tr></table></figure><p></p><p>我们也可手动增加locale，只要把新的locale增加到<code>/etc/locale.gen</code>文件中，再运行<br>locale-gen命令即可生成新的 locale；再通过设置上面介绍的LC_*变量就可设置系统的locale了。<br>下面是一个<code>locale.gen</code>文件的样例：<br></p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">zh_CN.GBK GBK</div><div class="line">zh_CN.UTF-8 UTF-8</div></pre></td></tr></table></figure><p></p><p>要在Shell中正常显示系统的中文提示信息和支持中文输入，LANG和shell的编码配置需一致，<br>并安装有中文locale。如：LANG和 shell的编码都配置成zh_CN.utf8，并安装有zh_CN.utf8这个locale。<br>如果shell和LANG配置不同，则中文显示乱码；如果LANG里设置的locale没有安装，<br>则不能显示系统的中文提示信息，只会显示英文提示信息。</p><p>如果仅修改某用户的locale，只需要在其主目录下的bash配置文件中export对应的字符环境。<br>如修改<code>.profile</code>，在尾部加入：<br></p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">export LC_ALL=&quot;zh_CN.gbk&quot;</div></pre></td></tr></table></figure><p></p><p>重新登录或新开终端即可修改当前的字符环境，如果想修改系统全局的locale，则需要修改<br>全局配置文件(/etc/profile)，方法如上。同样想修改全局的字符编码可以修改:<br>/etc/default/locale这个文件中所定义的字符集，它由update-locale指令所生成。</p><h4 id="vim显示中文"><a href="#vim显示中文" class="headerlink" title="vim显示中文"></a>vim显示中文</h4><p>安装中文包后还要编辑vim的配置文件<code>/etc/vimrc</code>，在最后加入以下内容：<br></p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">set fileencoding=utf-8</div><div class="line">set fileencodings=utf-8,gb18030,gbk,big5</div></pre></td></tr></table></figure><p></p><blockquote><p>我的debian8系统中已安装有locales包,执行<code>dpkp-reconfigure locales</code>,选<code>zh_CN.utf8</code>,<br>按提示一路确认后,重置完成就已经修改好系统字符集为zh_CN.utf8了,关闭ssh工具,再次用ssh工具<br>进入(我用的putty),会发现很多提示变成了中文,vi/vim也支持中文了,可以和中文乱码说再见了.</p></blockquote><p><a href="https://wiki.debian.org/Locale" target="_blank" rel="external">资料</a></p></div><footer><div class="clearfix"></div></footer></article></div></div><footer id="footer"><div class="copyright">&copy; 2017 <a href="/">(^_^)</a></div><div class="theme-copyright">Theme by <a href="https://github.com/orderedlist" target="_blank">orderedlist</a> | Redesign by <a href="http://heroicyang.com/" target="_blank">Heroic Yang</a></div><div class="clearfix"></div></footer><script src="//apps.bdimg.com/libs/jquery/2.0.3/jquery.min.js"></script><script src="/js/all.js"></script></body><!-- rebuild by neat -->