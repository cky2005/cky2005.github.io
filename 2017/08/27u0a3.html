<!-- build time:Sat Jan 19 2019 11:30:01 GMT+0800 (GMT+08:00) --><!DOCTYPE HTML><html><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="chrome=1"><title>解决Hexo置顶问题 | 唔多阁</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="author" content="(^_^)"><meta name="description" content="只需要在front-matter中设置需要置顶文章的top值，将会根据top值大小来选择置顶顺序。（大的在前面）"><meta name="description" content="只需要在front-matter中设置需要置顶文章的top值，将会根据top值大小来选择置顶顺序。（大的在前面）"><meta name="keywords" content="hexo"><meta property="og:type" content="article"><meta property="og:title" content="解决Hexo置顶问题"><meta property="og:url" content="https://cky2005.github.io/2017/08/27u0a3.html"><meta property="og:site_name" content="唔多阁"><meta property="og:description" content="只需要在front-matter中设置需要置顶文章的top值，将会根据top值大小来选择置顶顺序。（大的在前面）"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2017-10-12T23:25:44.205Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="解决Hexo置顶问题"><meta name="twitter:description" content="只需要在front-matter中设置需要置顶文章的top值，将会根据top值大小来选择置顶顺序。（大的在前面）"><link rel="icon" type="image/x-icon" href="/img/favicon.ico"><link rel="stylesheet" href="/css/style.css"></head></html><body><div class="wrapper"><header id="header"><div class="title"><h1><a href="/">唔多阁</a></h1><p><a href="/">(学习笔记,备忘,纯属复制粘贴,无技术含量)</a></p></div><nav class="nav"><ul></ul><div class="clearfix"></div></nav><div class="clearfix"></div></header><div class="content"><article class="post"><header><div class="icon"></div><a href="/2017/08/27u0a3.html"><time datetime="2017-08-27T12:27:00.000Z">2017-08-27</time></a><h1 class="title">解决Hexo置顶问题</h1></header><div class="entry"><p>只需要在front-matter中设置需要置顶文章的top值，将会根据top值大小来选择置顶顺序。（大的在前面）<a id="more"></a><br>修改<code>node_modules/hexo-generator-index/lib/generator.js</code><br></p><figure class="highlight"><table><tr><td class="code"><pre><span class="line">'use strict';</span><br><span class="line">var pagination = require('hexo-pagination');</span><br><span class="line">module.exports = function(locals)&#123;</span><br><span class="line">  var config = this.config;</span><br><span class="line">  var posts = locals.posts;</span><br><span class="line">    posts.data = posts.data.sort(function(a, b) &#123;</span><br><span class="line">        if(a.top &amp;&amp; b.top) &#123; // 两篇文章top都有定义</span><br><span class="line">            if(a.top == b.top) return b.date - a.date; // 若top值一样则按照文章日期降序排</span><br><span class="line">            else return b.top - a.top; // 否则按照top值降序排</span><br><span class="line">        &#125;</span><br><span class="line">        else if(a.top &amp;&amp; !b.top) &#123; // 以下是只有一篇文章top有定义，那么将有top的排在前面（这里用异或操作居然不行233）</span><br><span class="line">            return -1;</span><br><span class="line">        &#125;</span><br><span class="line">        else if(!a.top &amp;&amp; b.top) &#123;</span><br><span class="line">            return 1;</span><br><span class="line">        &#125;</span><br><span class="line">        else return b.date - a.date; // 都没定义按照文章日期降序排</span><br><span class="line">    &#125;);</span><br><span class="line">  var paginationDir = config.pagination_dir || 'page';</span><br><span class="line">  return pagination('', posts, &#123;</span><br><span class="line">    perPage: config.index_generator.per_page,</span><br><span class="line">    layout: ['index', 'archive'],</span><br><span class="line">    format: paginationDir + '/%d/',</span><br><span class="line">    data: &#123;</span><br><span class="line">      __index: true</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p></p><p>使用方法:在.md文件内容前面的front-matter加入top=xxx<br></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: xxxx</span><br><span class="line">date: 2017-08-01 10:56:00</span><br><span class="line">tags: vps</span><br><span class="line">top: 1000</span><br><span class="line">comments: ture</span><br><span class="line">---</span><br></pre></td></tr></table></figure><p></p><p><a href="http://www.netcan666.com/2015/11/22/%E8%A7%A3%E5%86%B3Hexo%E7%BD%AE%E9%A1%B6%E9%97%AE%E9%A2%98/" target="_blank" rel="noopener">来源</a></p><hr><h3 id="Hexo代码无法显示空行，并且导致行数和代码不对齐"><a href="#Hexo代码无法显示空行，并且导致行数和代码不对齐" class="headerlink" title="Hexo代码无法显示空行，并且导致行数和代码不对齐"></a>Hexo代码无法显示空行，并且导致行数和代码不对齐</h3><p>hexo后显示代码块存在问题，会自动删除部分空行，以及行数和代码不对齐<br>修改hexo\node_modules\hexo-util\lib\highlight.js<br></p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="number">32.</span> <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = lines.length; i &lt; len; i++) &#123;</span><br><span class="line"><span class="number">33.</span> line = lines[i];</span><br><span class="line"><span class="number">34.</span> <span class="keyword">if</span> (tab) line = replaceTabs(line, tab);</span><br><span class="line"><span class="number">35.</span> numbers += <span class="string">'&lt;div class="line"&gt;'</span> + (firstLine + i) + <span class="string">'&lt;/div&gt;'</span>;</span><br><span class="line"><span class="number">36.</span> content += <span class="string">'&lt;div class="line'</span>;</span><br><span class="line"><span class="number">37.</span> content += (mark.indexOf(firstLine + i) !== <span class="number">-1</span>) ? <span class="string">' marked'</span> : <span class="string">''</span>;</span><br><span class="line"><span class="number">38.</span> content += <span class="string">'"&gt;'</span> + line + <span class="string">'&lt;/div&gt;'</span>;</span><br><span class="line"><span class="number">39.</span> &#125;</span><br></pre></td></tr></table></figure><p></p><p>35到36之间插入一行 <code>line = (line.length != 0) ? line : &#39;&amp;nbsp&#39;;</code></p><p><a href="https://cosysn.github.io/2017/07/20/hexo-code-block-blank-line-incorrect/" target="_blank" rel="noopener">来源</a></p></div><footer><div class="tags"><a class="tags-link" href="/tags/hexo/">hexo</a></div><div class="clearfix"></div></footer></article></div></div><footer id="footer"><div class="copyright">&copy; 2019 <a href="/">(^_^)</a></div><div class="theme-copyright"><a href="javascript:scroll(0,0)">返回顶部</a> &nbsp; <a href="/archives/index.html">档案馆</a> &nbsp; <a href="/index.html">首页</a></div><div class="clearfix"></div></footer><script src="//apps.bdimg.com/libs/jquery/2.0.3/jquery.min.js"></script><script src="/js/all.js"></script><script type="text/javascript">$(document).ready(function(){$(document).on("click",".fold_hider",function(){$(">.fold",this.parentNode).slideToggle(),$(">:first",this).toggleClass("open")}),$("div.fold").css("display","none")})</script></body><!-- rebuild by neat -->